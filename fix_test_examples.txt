# FIX 4.4 Trading System Test Examples
# =====================================
# 
# 使用說明：
# 1. 啟動交易系統：./mts_app
# 2. 使用 telnet 連接：telnet localhost 8080
# 3. 複製下面的訊息發送（每行一個訊息）
# 4. 注意：訊息使用 | 作為分隔符，不是標準的 SOH
#
# 重要：所有客戶端的 TargetCompID(56) 必須是 "SERVER"
# SenderCompID(49) 可以是任意值，系統會動態識別

# =================================
# 測試場景 1：單一客戶端完整流程
# =================================

# --- CLIENT1 連接和登入 ---
# Logon Message (MsgType=A)
8=FIX.4.4|9=85|35=A|49=CLIENT1|56=SERVER|34=1|52=20230817-10:00:00|98=0|108=30|141=Y|10=139|

# 預期回應：Logon 確認訊息

# --- CLIENT1 發送買單 ---
# New Order Single (MsgType=D) - Buy 100 AAPL at $150.00
8=FIX.4.4|9=134|35=D|49=CLIENT1|56=SERVER|34=2|52=20230817-10:01:00|11=BUY_001|17=EXEC_001|55=AAPL|54=1|38=100|40=2|44=150.00|59=0|10=002|

# 預期回應：Execution Report (Order Accepted)

# --- CLIENT1 發送賣單 ---
# New Order Single (MsgType=D) - Sell 50 MSFT at $300.00
8=FIX.4.4|9=133|35=D|49=CLIENT1|56=SERVER|34=3|52=20230817-10:02:00|11=SELL_001|17=EXEC_002|55=MSFT|54=2|38=50|40=2|44=300.00|59=0|10=254|

# 預期回應：Execution Report (Order Accepted)

# --- CLIENT1 查詢訂單狀態 ---
# Order Status Request (MsgType=H)
8=FIX.4.4|9=90|35=H|49=CLIENT1|56=SERVER|34=4|52=20230817-10:03:00|11=BUY_001|55=AAPL|54=1|10=041|

# --- CLIENT1 取消訂單 ---
# Order Cancel Request (MsgType=F)
8=FIX.4.4|9=106|35=F|49=CLIENT1|56=SERVER|34=5|52=20230817-10:04:00|11=CANCEL_001|41=BUY_001|55=AAPL|54=1|60=20230817-10:04:00|10=016|

# 預期回應：Order Cancel Reject 或 Execution Report (Cancelled)

# --- CLIENT1 登出 ---
# Logout (MsgType=5)
8=FIX.4.4|9=69|35=5|49=CLIENT1|56=SERVER|34=6|52=20230817-10:05:00|58=Normal logout|10=170|

# =================================
# 測試場景 2：多客戶端撮合交易
# =================================

# --- CLIENT2 登入 ---
8=FIX.4.4|9=85|35=A|49=CLIENT2|56=SERVER|34=1|52=20230817-10:06:00|98=0|108=30|141=Y|10=141|

# --- CLIENT2 發送買單 (與 CLIENT1 的賣單撮合) ---
# Buy 50 MSFT at $300.00 (應該與上面的賣單撮合)
8=FIX.4.4|9=133|35=D|49=CLIENT2|56=SERVER|34=2|52=20230817-10:07:00|11=BUY_002|17=EXEC_003|55=MSFT|54=1|38=50|40=2|44=300.00|59=0|10=000|

# 預期回應：兩個 Execution Report (Fill)

# --- CLIENT3 登入 ---
8=FIX.4.4|9=85|35=A|49=CLIENT3|56=SERVER|34=1|52=20230817-10:08:00|98=0|108=30|141=Y|10=143|

# --- CLIENT3 發送大量訂單測試 ---
# Multiple orders for liquidity testing
8=FIX.4.4|9=134|35=D|49=CLIENT3|56=SERVER|34=2|52=20230817-10:09:00|11=BUY_003|17=EXEC_004|55=GOOGL|54=1|38=200|40=2|44=2500.00|59=0|10=028|

8=FIX.4.4|9=135|35=D|49=CLIENT3|56=SERVER|34=3|52=20230817-10:10:00|11=SELL_003|17=EXEC_005|55=GOOGL|54=2|38=150|40=2|44=2505.00|59=0|10=048|

# =================================
# 測試場景 3：錯誤處理測試
# =================================

# --- 錯誤的 TargetCompID (應該失敗) ---
8=FIX.4.4|9=85|35=A|49=CLIENT4|56=WRONG|34=1|52=20230817-10:11:00|98=0|108=30|141=Y|10=134|

# 預期回應：Reject 或連接關閉

# --- 缺少必要欄位的訂單 (應該失敗) ---
8=FIX.4.4|9=80|35=D|49=CLIENT1|56=SERVER|34=7|52=20230817-10:12:00|11=BAD_001|55=AAPL|54=1|10=130|

# 預期回應：Execution Report (Rejected)

# --- 無效的價格 (應該失敗) ---
8=FIX.4.4|9=135|35=D|49=CLIENT1|56=SERVER|34=8|52=20230817-10:13:00|11=BAD_002|17=EXEC_006|55=AAPL|54=1|38=100|40=2|44=-10.00|59=0|10=031|

# 預期回應：Execution Report (Rejected)

# =================================
# 測試場景 4：市價單測試
# =================================

# --- CLIENT1 重新登入 ---
8=FIX.4.4|9=85|35=A|49=CLIENT1|56=SERVER|34=1|52=20230817-10:14:00|98=0|108=30|141=Y|10=147|

# --- 市價買單 ---
# Market Order (OrdType=1) - Buy 100 AAPL at Market
8=FIX.4.4|9=120|35=D|49=CLIENT1|56=SERVER|34=2|52=20230817-10:15:00|11=MKT_001|17=EXEC_007|55=AAPL|54=1|38=100|40=1|59=0|10=165|

# --- 市價賣單 ---
# Market Order (OrdType=1) - Sell 75 AAPL at Market  
8=FIX.4.4|9=119|35=D|49=CLIENT1|56=SERVER|34=3|52=20230817-10:16:00|11=MKT_002|17=EXEC_008|55=AAPL|54=2|38=75|40=1|59=0|10=184|

# =================================
# 測試場景 5：Heartbeat 測試
# =================================

# --- 手動發送 Heartbeat ---
# Heartbeat (MsgType=0)
8=FIX.4.4|9=65|35=0|49=CLIENT1|56=SERVER|34=4|52=20230817-10:17:00|10=132|

# --- Test Request ---
# Test Request (MsgType=1)
8=FIX.4.4|9=77|35=1|49=CLIENT1|56=SERVER|34=5|52=20230817-10:18:00|112=TEST_123|10=046|

# 預期回應：Heartbeat with TestReqID

# =================================
# 欄位說明
# =================================
#
# 常用 FIX Tags：
# 8  = BeginString (FIX版本)
# 9  = BodyLength (訊息長度，不包含8,9,10欄位)
# 10 = CheckSum (校驗碼)
# 11 = ClOrdID (客戶端訂單ID)
# 17 = ExecID (執行ID)
# 34 = MsgSeqNum (訊息序號)
# 35 = MsgType (訊息類型)
# 38 = OrderQty (訂單數量)
# 40 = OrdType (訂單類型: 1=Market, 2=Limit)
# 41 = OrigClOrdID (原始客戶端訂單ID，用於取消/修改)
# 44 = Price (價格)
# 49 = SenderCompID (發送方ID)
# 52 = SendingTime (發送時間)
# 54 = Side (買賣方向: 1=Buy, 2=Sell)
# 55 = Symbol (股票代號)
# 56 = TargetCompID (接收方ID)
# 59 = TimeInForce (有效期: 0=Day, 1=GTC, 3=IOC, 4=FOK)
# 98 = EncryptMethod (加密方法: 0=None)
# 108= HeartBtInt (心跳間隔秒數)
# 112= TestReqID (測試請求ID)
# 141= ResetSeqNumFlag (重設序號標記)
#
# 訊息類型 (MsgType):
# A = Logon
# 0 = Heartbeat  
# 1 = Test Request
# 5 = Logout
# D = New Order Single
# F = Order Cancel Request
# G = Order Cancel/Replace Request
# H = Order Status Request
# 8 = Execution Report
# 9 = Order Cancel Reject
#
# 注意事項：
# 1. 所有時間格式：YYYYMMDD-HH:MM:SS
# 2. 序號必須遞增
# 3. 檢查碼計算：所有字符ASCII值相加後 mod 256
# 4. 長度計算：從35=開始到10=之前的所有字符數
# 5. 使用 | 分隔符而非標準 SOH (0x01)